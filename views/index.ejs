<% extend('./layouts/layout') %>
<div class="row my-4 justify-content-center">
  <%for (var prop in articles) {%>
  <div class="col-md-9">
    <div class="card mb-3">
      <div class="card-body">
        <a href="/post/<%- articles[prop].id %>"> <h2 class="text-primary"><%- articles[prop].title%></h2></a>
        <div class="d-flex flex-row text-secondary small">
          <div class="p-2">
            <span class="fa fa-clock-o"></span><%- moment(articles[prop].updateTime*1000).format('YYYY/MM/DD') %>
          </div>
          <div class="p-2">
            <i class="fa fa-tag" aria-hidden="true"></i>
            <span class="text-info">
              <% if(categories.hasOwnProperty(articles[prop].category)){ %> <%- categories[articles[prop].category].name
              %> <%} else {%> 沒有分類 <%}%>
            </span>
          </div>
        </div>
        <div>
          <%- stringtags(articles[prop].content).slice(0, 150) %> ...
        </div>
      </div>
    </div>
  </div>
  <%}%>
</div>

<nav class="my-5" aria-label="Page navigation example">
  <ul class="pagination justify-content-center">
    <li class="page-item <%if( !page.hasPre ){%>disabled<%}%>">
      <a class="page-link" href="/?page=<%- page.currentPage - 1%>" tabindex="-1">Previous</a>
    </li>
    <%for(var i = 1; i < page.totalPages +1 ; i++){%>
    <li class="page-item <% if(page.currentPage == i ) {%>active<%}%>">
      <a class="page-link" href="/?page=<%- i %>">
        <%- i %>
      </a>
    </li>
    <%}%>
    <li class="page-item <%if( !page.hasNext ){%>disabled<%}%>">
      <a class="page-link" href="/?page=<%- page.currentPage + 1%>">Next</a>
    </li>
  </ul>
</nav>
